<!DOCTYPE html>
<html>
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="renderer" content="webkit">
    <title>百城千园行</title>
    <!-- <link rel="stylesheet" type="text/css" href= "{{ url_for('static', filename = 'mymain.css') }}"> -->
    <link rel="stylesheet" type="text/css" href="/static/mymain.css?v=05251116">

</head>
<body>
    <div class="background"></div>
    <div class="title">
        <img class="logo" src="../static/百城千园行.png"/>
        <a class="head-text">
            <div class="head-text-main">工赋园区·数智未来</div>
            <div class="head-text-sub">百城千园行-张家口站</div>
        </a>
    </div>
    <div class="title-space"><div class="title-space-sub"></div></div>

    {% if openid %}
    <div class="weather">
        <a class="weather-text">签到成功！欢迎您，{{name}}</a>
    </div>
    <div class="maintext" style="padding-left: 3.2rem;">
        京津冀工业互联网协同发展示范区供需对接活动暨工业互联网一体化进园区“百城千园行”张家口站启动仪式
    </div>
    <div class="maintext">
        > 时间
        <div class="maintext-sub">2023.5.29-2023.5.30</div>
    </div>
    <div class="maintext">
        > 地点
        <div class="maintext-sub">张家口北辰五洲皇冠酒店</div>
        <div class="maintext-sub">(住宿费用需自理)</div>
    </div>
    <div class="maintext">
        > 主题
        <div class="maintext-sub">工赋园区·数智未来</div>
    </div>

    <!-- <div class="hang1">
        <div class="shijian" onclick="toShijian();">会议安排</div> 
        <div class="dingcan" onclick="toDingcan();">酒店订餐</div>
    </div> -->
    <div class="floating-buttons">
        <!-- <a href="#" class="floating-button" style="font-weight: bold;border-style: inset;background-color: #5698c3;color: aliceblue;">主页</a> -->
        <a href="#" class="floating-button" onclick="toWeather();">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cloud-moon-fill" viewBox="0 0 16 16">
                <path d="M11.473 11a4.5 4.5 0 0 0-8.72-.99A3 3 0 0 0 3 16h8.5a2.5 2.5 0 0 0 0-5h-.027z"/>
                <path d="M11.286 1.778a.5.5 0 0 0-.565-.755 4.595 4.595 0 0 0-3.18 5.003 5.46 5.46 0 0 1 1.055.209A3.603 3.603 0 0 1 9.83 2.617a4.593 4.593 0 0 0 4.31 5.744 3.576 3.576 0 0 1-2.241.634c.162.317.295.652.394 1a4.59 4.59 0 0 0 3.624-2.04.5.5 0 0 0-.565-.755 3.593 3.593 0 0 1-4.065-5.422z"/>
              </svg>
            天气
        </a>
        <a href="#" class="floating-button" onclick="toShijian();">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock-fill" viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
              </svg>
              日程
        </a>
        <a href="#" class="floating-button" onclick="toDingcan();">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cup-hot-fill" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M.5 6a.5.5 0 0 0-.488.608l1.652 7.434A2.5 2.5 0 0 0 4.104 16h5.792a2.5 2.5 0 0 0 2.44-1.958l.131-.59a3 3 0 0 0 1.3-5.854l.221-.99A.5.5 0 0 0 13.5 6H.5ZM13 12.5a2.01 2.01 0 0 1-.316-.025l.867-3.898A2.001 2.001 0 0 1 13 12.5Z"/>
                <path d="m4.4.8-.003.004-.014.019a4.167 4.167 0 0 0-.204.31 2.327 2.327 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.593.593 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3.31 3.31 0 0 1-.202.388 5.444 5.444 0 0 1-.253.382l-.018.025-.005.008-.002.002A.5.5 0 0 1 3.6 4.2l.003-.004.014-.019a4.149 4.149 0 0 0 .204-.31 2.06 2.06 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.593.593 0 0 0-.09-.252A4.334 4.334 0 0 0 3.6 2.8l-.01-.012a5.099 5.099 0 0 1-.37-.543A1.53 1.53 0 0 1 3 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a5.446 5.446 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 4.4.8Zm3 0-.003.004-.014.019a4.167 4.167 0 0 0-.204.31 2.327 2.327 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.593.593 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3.31 3.31 0 0 1-.202.388 5.444 5.444 0 0 1-.253.382l-.018.025-.005.008-.002.002A.5.5 0 0 1 6.6 4.2l.003-.004.014-.019a4.149 4.149 0 0 0 .204-.31 2.06 2.06 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.593.593 0 0 0-.09-.252A4.334 4.334 0 0 0 6.6 2.8l-.01-.012a5.099 5.099 0 0 1-.37-.543A1.53 1.53 0 0 1 6 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a5.446 5.446 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 7.4.8Zm3 0-.003.004-.014.019a4.077 4.077 0 0 0-.204.31 2.337 2.337 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.593.593 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3.198 3.198 0 0 1-.202.388 5.385 5.385 0 0 1-.252.382l-.019.025-.005.008-.002.002A.5.5 0 0 1 9.6 4.2l.003-.004.014-.019a4.149 4.149 0 0 0 .204-.31 2.06 2.06 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.593.593 0 0 0-.09-.252A4.334 4.334 0 0 0 9.6 2.8l-.01-.012a5.099 5.099 0 0 1-.37-.543A1.53 1.53 0 0 1 9 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a5.446 5.446 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 10.4.8Z"/>
              </svg>
              订餐
        </a>
    </div>
    {% else %}
    <div class="loading">
        <!-- <img src="../static/liantong.png" style="height: 36px;"/> -->
        <div class="loading-sub">登录中……</div>
    </div>
    {% endif %}

    <footer>
        <div class="container">
          <div class="content">
            <p>Copyright©2023  河北联通  提供技术支持</p>
            <img src="../static/liantong.png"/>
            <!-- <p>Technical support: support@yourcompany.com</p> -->
          </div>
        </div>
      </footer>



<script src="/static/jquery.min.js"></script>
<script language="JavaScript">

    const redirectToAuthPage = () => {
        const callbackURL = encodeURIComponent(`https://wxapp.wind-watcher.cn/login`)
        const state = encodeURIComponent('')
        const wechatId = 'wxcd05e9f3d5d1f7bf'
        const redirectURI = `https://open.weixin.qq.com/connect/oauth2/authorize?appid=${wechatId}&redirect_uri=${callbackURL}&response_type=code&scope=snsapi_base&state=${state}#wechat_redirect`
        // console.log(redirectURI)
        window.location.href = redirectURI
        
    }
    var openid = "{{openid}}"
    if(!openid){
        redirectToAuthPage()
    }
    
    function toShijian(){
        // window.location.href = "/timeanpai/";
        window.location.href = "/timeanpai/"+openid;
        // window.open("/timeanpai/"+openid);
        // window.location.hash = "/timeanpai/"+openid
    };
    function toDingcan(){
        window.location.href = "/dingcan/"+openid;
    };
    function toWeather(){
        window.location.href = "/weather/"+openid;
    };



    // $(function() {
    // 	if (window.history && window.history.pushState) {
    // 		$(window).on('popstate', function () {
    // 			window.history.pushState('forward', null, '#');
    // 			window.history.forward(1);
    // 		});
    // 	}
    //     window.history.pushState('forward', null, '#'); //在IE中必须得有这两行
    //     window.history.forward(1);
    // });

    // jQuery(document).ready(function ($) {
	//     if (window.history && window.history.pushState) {
	// 		$(window).on('popstate', function () {
	// 			window.history.forward(1);
	// 		});
  	// 	}
    // });


    // document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {
    //     WeixinJSBridge.call('hideToolbar');
    // });
    // history.pushState(null, null, document.URL); //禁止网页返回上一页
    // window.addEventListener('popstate', function() { 
    // history.pushState(null, null, document.URL); 
    // });

    // console.log(window.location)

    // sessionStorage.setItem('key', 1);
    // pushHistory();
    // window.location.href = "#111"
    // // pushHistory();

    // window.addEventListener("popstate", function (e) {
    //     console.log(e)
    //     console.log(e.currentTarget.location)
    //     if(sessionStorage.getItem('key') != 1) {
    //         sessionStorage.setItem('key', 1);
    //     }
    //     if(sessionStorage.getItem('key') == 1) {
    //         console.log(window.location.hash)
    //         console.log(window.location.href)
    //         // document.addEventListener('WeixinJSBridgeReady', function(){WeixinJSBridge.call('closeWindow');},false);
    //         WeixinJSBridge.call('closeWindow');
    //         parent.WeixinJSBridge.call('closeWindow');
    //     }

    // }, false);

    // function pushHistory() {
    //     history.pushState({page: 1}, "title 1", "#");
    //     history.pushState({page: 2}, "title 2", "#111");
    // }



    // function onBridgeReady() {
    //     console.log('WeixinJSBridge',WeixinJSBridge);
    //     WeixinJSBridge.call("closeWindow");
    // }
    // function wxback() {
    //     if (typeof WeixinJSBridge === "undefined") {
    //         if (document.addEventListener) {
    //             document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);
    //         } else if (document.attachEvent) {
    //             document.attachEvent('WeixinJSBridgeReady', onBridgeReady);
    //             document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);
    //         }
    //     } else {
    //         onBridgeReady();
    //     }
    // }

    
</script>
</body>
</html>
